{% extends "layout.html" %}
{% block content %}
<h2>Students</h2>

<form method="post" class="card">
  <div class="grid">
    <div>
      <label>Student ID (optional)</label>
      <input name="student_id" placeholder="A22CS0001">
    </div>
    <div>
      <label>Name</label>
      <input name="name" required>
    </div>
    <div>
      <label>Email</label>
      <input name="email" type="email" required>
    </div>
    <div>
      <label>Class (optional)</label>
      <select name="class_id">
        <option value="">— None —</option>
        {% for c in classes %}<option value="{{ c.id }}">{{ c.name }}</option>{% endfor %}
      </select>
    </div>
    <div>
      <label>Group (optional)</label>
      <select name="group_id">
        <option value="">— None —</option>
        {% for g in groups %}<option value="{{ g.id }}">{{ g.name }} (class {{ g.class_id }})</option>{% endfor %}
      </select>
    </div>
  </div>
  <button type="submit">Add Student</button>
</form>

<table>
  <thead><tr><th>ID</th><th>StdID</th><th>Name</th><th>Email</th><th>Class</th><th>Group</th><th>Actions</th></tr></thead>
  <tbody>
    {% for s in students %}
      <tr>
        <td>{{ s.id }}</td>
        <td>{{ s.student_id or '-' }}</td>
        <td>{{ s.name }}</td>
        <td>{{ s.email }}</td>
        <td>{{ s.class_.name if s.class_ else '-' }}</td>
        <td>{{ s.group.name if s.group else '-' }}</td>
        <td>
          <form method="post" action="{{ url_for('delete_student', student_id=s.id) }}" onsubmit="return confirm('Remove student?');">
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
