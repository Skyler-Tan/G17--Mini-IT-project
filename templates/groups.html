{% extends "layout.html" %}
{% block content %}


{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='groups.css') }}">
{% endblock %}


<h2>Groups for {{ subject.name }}</h2>

<div class="group-page">
  <!-- Left: Create group form -->
  <form method="post" class="card">
    <label>New Group Name</label>
    <input name="name" placeholder="e.g. Group A" required>
    <button type="submit">Create Group</button>
  </form>

  <!-- Right: Groups table -->
  <table>
    <thead><tr><th>ID</th><th>Name</th><th>Members</th><th>Actions</th></tr></thead>
    <tbody>
      {% for g in groups %}
        <tr>
          <td>{{ g.id }}</td>
          <td>{{ g.name }}</td>
          <td>
            {% for m in g.members %}
              {{ m.student_user.first_name }} {{ m.student_user.last_name }}<br>
            {% else %}
              No members yet
            {% endfor %}
          </td>
          <td>
            <form method="post" action="{{ url_for('delete_group', group_id=g.id) }}" onsubmit="return confirm('Delete group?');">
              <button type="submit">Delete</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}