{% extends "base.html" %}

{% block title %}Dashboard - Peer Review App{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
{% endblock %}

{% block content %}
 <header class="topbar">
   <div class="logo-area">
    <img src="{{ url_for('static', filename='uni_logo-removebg-preview.png') }}" alt="University Logo">
   </div>
 </header>

 <main class="dashboard-main">
   <h1>Student Peer Review System</h1>
   <h2>Welcome, {{ prefix }} {{ user.first_name }}!</h2>

    {% if user.role == "lecturer" %}
    <h2>Subjects</h2>
    <section class="cards">
     {% for subject in subjects %}
      <div class="card">
        <h3>{{ subject.name }}</h3>
        <p><a href="{{ url_for('manage_groups', subject_id=subject.id) }}">Assign Groups</a></p>
        <p><a href="{{ url_for('view_groups', subject_id=subject.id) }}">View Groups</a></p>
      </div>
     {% else %}
       <p>No subjects created yet.</p>
     {% endfor %}
   </section>

  <h2>Lecturer Tools</h2>
  <section class="cards">
    <div class="card">
      <a href="{{ url_for('list_subjects') }}">Create New Subject</a>
    </div>
    <div class="card">
      <a href="{{ url_for('manage_students') }}">Manage Students</a>
    </div>
  </section>
{% endif %}

{% if user.role == "student" %}
  <h2>Subjects</h2>
  <section class="cards">
    {% for subject in assigned_subjects %}
      <div class="card">
        <h3>{{ subject.name }}</h3>
        <p><a href="{{ url_for('start_peer_review', subject_id=subject.id) }}">Start Peer Review</a></p>
      </div>
    {% else %}
      <p>No subjects assigned yet.</p>
    {% endfor %}
  </section>
{% endif %}

 <h2>Settings</h2>
  <section class="cards">
    <div class="card">
      <a href="{{ url_for('profile') }}">My Profile</a>
    </div>
    <div class="card">
      <a href="{{ url_for('change_password') }}">Change Password</a>
    </div>
    <div class="card">
      <a href="{{ url_for('logout') }}">Logout</a>
    </div>
  </section>
  </main>
  {% endblock %}
